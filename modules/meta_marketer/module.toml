[module]
name = "meta_marketer"
version = "1.0.0"
author = "starkbot"
description = "Meta Ads manager — create campaigns, monitor performance, optimize spend, and generate creative via the Meta Marketing API"

[service]
command = "uv run service.py"
default_port = 9110
port_env_var = "META_MARKETER_PORT"
has_dashboard = true
health_endpoint = "/rpc/status"
backup_endpoint = "/rpc/backup/export"
restore_endpoint = "/rpc/backup/restore"
dashboard_endpoint = "/"

[service.env_vars]
META_ACCESS_TOKEN = { required = true, description = "Meta Marketing API access token (System User token recommended for production)" }
META_AD_ACCOUNT_ID = { required = true, description = "Meta Ad Account ID (numeric, e.g. 123456789)" }
META_APP_SECRET = { required = false, description = "Meta App Secret for appsecret_proof (recommended for production)" }

[skill]
skill_dir = "skill"

[agent]
dir = "agent"

[[tools]]
name = "meta_ads"
description = "Manage Meta ad campaigns — create, update, pause, and monitor campaigns, ad sets, ads, and creatives"
group = "social"
rpc_method = "POST"
rpc_endpoint = "/rpc/tools/ads"

[tools.parameters.action]
type = "string"
description = "Action to perform"
required = true
enum = [
  "list_campaigns", "get_campaign", "create_campaign", "update_campaign", "pause_campaign",
  "list_adsets", "get_adset", "create_adset", "update_adset",
  "list_ads", "get_ad", "create_ad", "update_ad",
  "list_creatives", "create_creative"
]

[tools.parameters.campaign_id]
type = "string"
description = "Campaign ID (for get/update/pause actions and adset/ad listing)"
required = false

[tools.parameters.adset_id]
type = "string"
description = "Ad Set ID (for get/update actions and ad listing)"
required = false

[tools.parameters.ad_id]
type = "string"
description = "Ad ID (for get/update actions)"
required = false

[tools.parameters.config]
type = "string"
description = "JSON config object for create/update actions (campaign objective, budget, targeting, creative, etc.)"
required = false

[tools.parameters.limit]
type = "integer"
description = "Max results to return (default 25, max 100)"
required = false

[[tools]]
name = "meta_insights"
description = "Pull Meta ad performance insights — spend, impressions, clicks, conversions, CPA, ROAS with breakdowns"
group = "social"
rpc_method = "POST"
rpc_endpoint = "/rpc/tools/insights"

[tools.parameters.action]
type = "string"
description = "Action to perform"
required = true
enum = ["account_insights", "campaign_insights", "adset_insights", "ad_insights", "audit"]

[tools.parameters.campaign_id]
type = "string"
description = "Campaign ID (for campaign/adset/ad level insights)"
required = false

[tools.parameters.adset_id]
type = "string"
description = "Ad Set ID (for adset/ad level insights)"
required = false

[tools.parameters.ad_id]
type = "string"
description = "Ad ID (for ad level insights)"
required = false

[tools.parameters.date_preset]
type = "string"
description = "Date range preset"
required = false
enum = ["today", "yesterday", "last_3d", "last_7d", "last_14d", "last_30d", "last_90d", "this_month", "last_month"]

[tools.parameters.time_range]
type = "string"
description = "Custom date range as JSON: {\"since\": \"2026-01-01\", \"until\": \"2026-01-31\"}"
required = false

[tools.parameters.breakdowns]
type = "string"
description = "Comma-separated breakdowns: age, gender, placement, device, country"
required = false

[tools.parameters.target_cpa]
type = "number"
description = "Target CPA for audit action — flags campaigns exceeding this"
required = false

[tools.parameters.target_roas]
type = "number"
description = "Target ROAS for audit action — flags campaigns below this"
required = false
